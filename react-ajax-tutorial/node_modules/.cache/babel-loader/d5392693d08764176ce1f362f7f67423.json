{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ZB-PC079\\\\Desktop\\\\VELOPERT\\\\react-ajax-tutorial\\\\src\\\\containers\\\\PostContainer\\\\PostContainer.js\";\nimport React, { Component } from 'react';\nimport { PostWrapper, Navigate, Post, Warning } from '../../components';\nimport * as service from '../../services/post';\n\nclass PostContainer extends Component {\n  constructor(props) {\n    super(); // initializes component state\n\n    this.showWarning = () => {\n      this.setState({\n        warningVisibility: true\n      });\n      setTimeout(() => {\n        this.setState({\n          warningVisibility: false\n        });\n      }, 1500);\n    };\n\n    this.handleNavigateClick = type => {\n      const postId = this.state.postId;\n\n      if (type === 'NEXT') {\n        this.fetchPostInfo(postId + 1);\n      } else {\n        this.fetchPostInfo(postId - 1);\n      }\n    };\n\n    this.fetchPostInfo = async postId => {\n      this.setState({\n        fetching: true // requesting..\n\n      });\n\n      try {\n        // wait for two promises\n        const info = await Promise.all([service.getPost(postId), service.getComments(postId)]); // Object destructuring Syntax,\n        // takes out required values and create references to them\n\n        const _info$0$data = info[0].data,\n              title = _info$0$data.title,\n              body = _info$0$data.body;\n        const comments = info[1].data;\n        this.setState({\n          postId,\n          post: {\n            title,\n            body\n          },\n          comments,\n          fetching: false // done!\n\n        });\n      } catch (e) {\n        // if error, stop at this point\n        this.setState({\n          fetching: false\n        });\n        this.showWarning();\n      }\n    };\n\n    this.state = {\n      postId: 1,\n      fetching: false,\n      // tells whether the request is waiting for response or not\n      post: {\n        title: null,\n        body: null\n      },\n      comments: [],\n      warningVisibility: false\n    };\n  }\n\n  componentDidMount() {\n    this.fetchPostInfo(1);\n  }\n\n  render() {\n    const _this$state = this.state,\n          postId = _this$state.postId,\n          fetching = _this$state.fetching,\n          post = _this$state.post,\n          comments = _this$state.comments,\n          warningVisibility = _this$state.warningVisibility;\n    return React.createElement(PostWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(Navigate, {\n      postId: postId,\n      disabled: fetching,\n      onClick: this.handleNavigateClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(Post, {\n      postId: postId,\n      title: post.title,\n      body: post.body,\n      comments: comments,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(Warning, {\n      visible: warningVisibility,\n      message: \"That post does not exist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default PostContainer;","map":{"version":3,"sources":["C:\\Users\\ZB-PC079\\Desktop\\VELOPERT\\react-ajax-tutorial\\src\\containers\\PostContainer\\PostContainer.js"],"names":["React","Component","PostWrapper","Navigate","Post","Warning","service","PostContainer","constructor","props","showWarning","setState","warningVisibility","setTimeout","handleNavigateClick","type","postId","state","fetchPostInfo","fetching","info","Promise","all","getPost","getComments","data","title","body","comments","post","e","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { PostWrapper, Navigate, Post, Warning } from '../../components'\r\nimport * as service from '../../services/post'\r\n\r\nclass PostContainer extends Component {\r\n\r\n  constructor(props) {\r\n    super();\r\n    // initializes component state\r\n    this.state = {\r\n      postId: 1,\r\n      fetching: false, // tells whether the request is waiting for response or not\r\n      post: {\r\n        title: null,\r\n        body: null\r\n      },\r\n      comments: [],\r\n      warningVisibility: false\r\n    };\r\n  }\r\n\r\n  showWarning = () => {\r\n    this.setState({\r\n      warningVisibility: true\r\n    })\r\n\r\n    setTimeout(\r\n      () => {\r\n        this.setState({\r\n          warningVisibility: false\r\n        })\r\n      }, 1500\r\n    )\r\n  }\r\n\r\n  handleNavigateClick = (type) => {\r\n    const postId = this.state.postId;\r\n\r\n    if (type === 'NEXT') {\r\n      this.fetchPostInfo(postId + 1);\r\n    } else {\r\n      this.fetchPostInfo(postId - 1);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.fetchPostInfo(1);\r\n  }\r\n\r\n  fetchPostInfo = async (postId) => {\r\n\r\n    this.setState({\r\n      fetching: true // requesting..\r\n    });\r\n\r\n    try {\r\n      // wait for two promises\r\n      const info = await Promise.all([\r\n        service.getPost(postId),\r\n        service.getComments(postId)\r\n      ]);\r\n\r\n      // Object destructuring Syntax,\r\n      // takes out required values and create references to them\r\n      const { title, body } = info[0].data;\r\n\r\n      const comments = info[1].data;\r\n\r\n      this.setState({\r\n        postId,\r\n        post: {\r\n          title,\r\n          body\r\n        },\r\n        comments,\r\n        fetching: false // done!\r\n      });\r\n    } catch (e) {\r\n      // if error, stop at this point\r\n      this.setState({\r\n        fetching: false\r\n      })\r\n      this.showWarning();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { postId, fetching, post, comments, warningVisibility } = this.state;\r\n\r\n    return (\r\n      <PostWrapper>\r\n        <Navigate\r\n          postId={postId}\r\n          disabled={fetching}\r\n          onClick={this.handleNavigateClick}\r\n        />\r\n        <Post\r\n          postId={postId}\r\n          title={post.title}\r\n          body={post.body}\r\n          comments={comments}\r\n        />\r\n        <Warning visible={warningVisibility} message=\"That post does not exist\" />\r\n      </PostWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default PostContainer;"]},"metadata":{},"sourceType":"module"}